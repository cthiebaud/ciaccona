<!DOCTYPE html>
<html>

<head>
    <!-- Include Handlebars from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script id="head-template" type="text/x-handlebars-template">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DJBNRY1Z9M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-DJBNRY1Z9M');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="keywords" content="Bach, JSBach, BWV1004, Partita, Ciaconna, Chaconne">
    <meta name="author" content="Christophe Thiebaud">

    <!-- HTML Meta Tags -->
    <title>Ciaccona</title>
    <meta name="description" content="Ciaccona">

    <!-- Facebook Meta Tags -->
    <meta property="fb:app_id" content="176898451849553">
    <meta property="og:locale" content="en_GB" />
    <meta property="og:site_name" content="ciaccona.cthiebaud.com" />
    <meta property="og:url" content="">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Ciaccona">
    <meta property="og:description"
        content="Ciaccona from Johann Sebastian Bach's Partita in D minor for solo violin (BWV 1004), performed by Miguel Rincón, collated with 25+ other performers.">
    <meta property="og:image" content="" />
    <meta property="og:image:url" content="" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="2400" />
    <meta property="og:image:height" content="1256" />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@cthiebaud">
    <meta property="twitter:domain" content="ciaccona.cthiebaud.com">
    <meta property="twitter:url" content="">
    <meta name="twitter:title" content="Ciaccona">
    <meta name="twitter:description"
        content="Ciaccona from Johann Sebastian Bach's Partita in D minor for solo violin (BWV 1004), performed by Miguel Rincón, collated with 25+ other performers.">
    <meta name="twitter:image" content="https://ciaccona.cthiebaud.com/screenshots/miguelrincon.jpg">

    </script>
    <script>
        var source = document.getElementById("head-template").innerHTML;
        var template = Handlebars.compile(source); console.log(template({}));
        console.log(template)
    </script>

    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

    <script type="module">
        // import { mapVideoId2ArtistName } from '/js/_timings.js'
        import jquery from 'https://cdn.jsdelivr.net/npm/jquery@3.6.4/+esm'

        const artists = {
            "amandinebeyer": { vid: "mg9kT7XiLoU", nam: "Amandine Beyer" },
            "andreadevitis": { vid: "oxWq93mlAyc", nam: "Andrea De Vitis" },
            "anneleenlenaerts": { vid: "sHXtVWks", nam: "Anneleen Lenaerts" },
            "bellahristova": { vid: "XkfsGCIiHb4", nam: "Bella Hristova" },
            "chiaramassini": { vid: "SzxzLtwK_eo", nam: "Chiara Massini" },
            "christiantetzlaff": { vid: "mTTT5_oX69Q", nam: "Christian Tetzlaff" },
            "christophethiebaud": { vid: "Vslz1tDsaWw", nam: "Christophe Thiebaud" },
            "florentinginot": { vid: "maDgVXxV1b0", nam: "Florentin Ginot" },
            "genzohtakehisa": { vid: "JETARLGbUJo", nam: "Genzoh Takehisa" },
            "hilaryhahn": { vid: "ngjEVKxQCWs", nam: "Hilary Hahn" },
            "isabellefaust": { vid: "r67BASAgP5Q", nam: "Isabelle Faust" },
            "juliafischer": { vid: "WZ0wkyRBlqo", nam: "Julia Fischer" },
            "lisajacobs": { vid: "dyAcRqpjbqU", nam: "Lisa Jacobs" },
            "martafemenía": { vid: "P93o202UJRs", nam: "Marta Femenía" },
            "martinbaker": { vid: "bKIPJqqH--Q", nam: "Martin Baker" },
            "midorigoto": { vid: "KgSKvOAJMb8", nam: "Midori Gotō" },
            "miguelrincon": { vid: "Kxn0ySsHDRA", nam: "Miguel Rincón" },
            "mikastoltzman": { vid: "BYg7Di8CH9w", nam: "Mika Stoltzman" },
            "petrapolackova": { vid: "lxZqC_J0C74", nam: "Petra Poláčková" },
            "rachellellenwong": { vid: "59KFAY_qf-Q", nam: "Rachell Ellen Wong" },
            "rachelpodger": { vid: "1HSJufg7I1I", nam: "Rachel Podger" },
            "raphaellasmits": { vid: "Jcy7E4uHYK8", nam: "Raphaella Smits" },
            "sigiswaldkuijken": { vid: "Df8dNT5s", nam: "Sigiswald Kuijken" },
            "veronikaeberle": { vid: "Ilb3no_cwnI", nam: "Veronika Eberle" },
            "veroniquederaedemaeker": { vid: "AbZxSocrvvs", nam: "Veronique De Raedemaeker" },
            "virginierobilliard": { vid: "KWcGsRKbe_U", nam: "Virginie Robilliard" },
            "vonhansen": { vid: "X5-F_w_rX4k", nam: "Von Hansen" },
            "yunpark": { vid: "5ITydjLkYUk", nam: "Yun Park" },
        }

        const thisURL = new URL(window.location);
        let nam = thisURL.pathname.replace(/\/video\//gi, '').replace(/.html/gi, '')
        if (nam === "_template") {
            const params = new Proxy(new URLSearchParams(window.location.search), {
                get: (searchParams, prop) => searchParams.get(prop)
            })
            nam = params.nam ?? undefined
        }
        if (nam) {
            const a = artists[nam]

            window.addEventListener("DOMContentLoaded", (event) => {
                console.log("DOM fully loaded and parsed");
                const fullName = a.nam
                document.querySelector('head meta[name="keywords"]').content += `, ${fullName}`

                const title = `Ciaccona - ${fullName}`
                document.querySelector('head title').content = title
                document.querySelector('head meta[property="og:title"]').content = title
                document.querySelector('head meta[name="twitter:title"]').content = title

                const count = Object.keys(artists).length - 2
                const description = `Ciaccona from Johann Sebastian Bach's Partita in D minor for solo violin (BWV 1004), performed by ${fullName}, collated with ${count}+ other performers.`
                document.querySelector('head meta[name="description"]').content = description
                document.querySelector('head meta[property="og:description"]').content = description
                document.querySelector('head meta[name="twitter:description"]').content = description

                const url = `https://ciaccona.cthiebaud/video/${nam}.html`
                document.querySelector('head meta[property="og:url"]').content = url
                document.querySelector('head meta[property="twitter:url"]').content = url

                const image = `https://ciaccona.cthiebaud.com/screenshots/${nam}.jpg`
                document.querySelector('head meta[property="og:image"]').content = image
                document.querySelector('head meta[property="og:image:url"]').content = image

                // window.location.href = `/?yt=${a.vid}`
            });
        }
        const name = 'amandinebeyer'
        const url = `/video/_template.html?nam=${name}`
        jquery("<div>").load(url, function (results) {
            console.log(results)

            var blob = new Blob([results], { type: "text/plain;charset=utf-8" });
            // saveAs(blob, "qwe.html");
        });

    </script>
</head>

</html>