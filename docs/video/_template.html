<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!-- Include Handlebars from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <!-- https://github.com/handlebars-lang/handlebars.js/blob/master/FAQ.md -->
    <script id="head-template" type="text/x-handlebars-template">
<!DOCTYPE html>
<html>
<head>
    <!-- Google tag (gtag.js) -->
    <scr{{!}}ipt async src="https://www.googletagmanager.com/gtag/js?id=G-DJBNRY1Z9M"></scr{{!}}ipt>
    <scr{{!}}ipt>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-DJBNRY1Z9M');
    </scr{{!}}ipt>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="keywords" content="Bach, JSBach, BWV1004, Partita, Ciaconna, Chaconne, {{artist.fullName}}">
    <meta name="author" content="Christophe Thiebaud">

    <!-- HTML Meta Tags -->
    <title>{{title}}</title>
    <meta name="description" content="{{{description}}}">

    <!-- Facebook Meta Tags -->
    <meta property="fb:app_id" content="176898451849553">
    <meta property="og:locale" content="en_GB" />
    <meta property="og:site_name" content="ciaccona.cthiebaud.com">
    <meta property="og:url" content="{{url}}">
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{title}}">
    <meta property="og:description" content="{{{description}}}">
    <meta property="og:image" content="{{image}}">
    <meta property="og:image:url" content="{{image}}">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="2400">
    <meta property="og:image:height" content="1256">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@cthiebaud">
    <meta property="twitter:domain" content="ciaccona.cthiebaud.com">
    <meta property="twitter:url" content="{{url}}">
    <meta name="twitter:title" content="{{title}}">
    <meta name="twitter:description" content="{{{description}}}">
    <meta name="twitter:image" content="{{image}}">
    <scr{{!}}ipt>
        window.location.href = `/?yt={{artist.videoId}}`
    </scr{{!}}ipt>
</head>
</html>
    </script>

    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

    <script type="module">
        // import { mapVideoId2ArtistName } from '/js/_timings.js'
        import jquery from 'https://cdn.jsdelivr.net/npm/jquery@3.6.4/+esm'

        const artists = {
            "amandinebeyer": { videoId: "mg9kT7XiLoU", fullName: "Amandine Beyer" },
            "andreadevitis": { videoId: "oxWq93mlAyc", fullName: "Andrea De Vitis" },
            "anneleenlenaerts": { videoId: "sHXtVWks", fullName: "Anneleen Lenaerts" },
            "bellahristova": { videoId: "XkfsGCIiHb4", fullName: "Bella Hristova" },
            "chiaramassini": { videoId: "SzxzLtwK_eo", fullName: "Chiara Massini" },
            "christiantetzlaff": { videoId: "mTTT5_oX69Q", fullName: "Christian Tetzlaff" },
            "christophethiebaud": { videoId: "Vslz1tDsaWw", fullName: "Christophe Thiebaud" },
            "florentinginot": { videoId: "maDgVXxV1b0", fullName: "Florentin Ginot" },
            "genzohtakehisa": { videoId: "JETARLGbUJo", fullName: "Genzoh Takehisa" },
            "hilaryhahn": { videoId: "ngjEVKxQCWs", fullName: "Hilary Hahn" },
            "isabellefaust": { videoId: "r67BASAgP5Q", fullName: "Isabelle Faust" },
            "juliafischer": { videoId: "WZ0wkyRBlqo", fullName: "Julia Fischer" },
            "lisajacobs": { videoId: "dyAcRqpjbqU", fullName: "Lisa Jacobs" },
            "martafemenia": { videoId: "P93o202UJRs", fullName: "Marta Femenía" },
            "martinbaker": { videoId: "bKIPJqqH--Q", fullName: "Martin Baker" },
            "midorigoto": { videoId: "KgSKvOAJMb8", fullName: "Midori Gotō" },
            "miguelrincon": { videoId: "Kxn0ySsHDRA", fullName: "Miguel Rincón" },
            "moranwasser": { videoId: "YzP6mkPVzm0", fullName: "Moran Wasser" },
            "mikastoltzman": { videoId: "BYg7Di8CH9w", fullName: "Mika Stoltzman" },
            "petrapolackova": { videoId: "lxZqC_J0C74", fullName: "Petra Poláčková" },
            "rachellellenwong": { videoId: "59KFAY_qf-Q", fullName: "Rachell Ellen Wong" },
            "rachelpodger": { videoId: "1HSJufg7I1I", fullName: "Rachel Podger" },
            "raphaellasmits": { videoId: "Jcy7E4uHYK8", fullName: "Raphaella Smits" },
            "sigiswaldkuijken": { videoId: "Df8dNT5s", fullName: "Sigiswald Kuijken" },
            "veronikaeberle": { videoId: "Ilb3no_cwnI", fullName: "Veronika Eberle" },
            "veroniquederaedemaeker": { videoId: "AbZxSocrvvs", fullName: "Veronique De Raedemaeker" },
            "virginierobilliard": { videoId: "KWcGsRKbe_U", fullName: "Virginie Robilliard" },
            "vonhansen": { videoId: "X5-F_w_rX4k", fullName: "Von Hansen" },
            "yunpark": { videoId: "5ITydjLkYUk", fullName: "Yun Park" },
        }

        const source = document.getElementById("head-template").innerHTML;
        const template = Handlebars.compile(source);
        const BreakException = {};
        const count = Object.keys(artists).length - 2
        let i = 1
        Object.keys(artists).forEach((key) => {
            const artist = artists[key]
            const results = template({
                key: key,
                artist: artist,
                title: `Ciaccona - ${artist.fullName}`,
                url: `https://ciaccona.cthiebaud/video/${key}.html`,
                description: `Ciaccona from Johann Sebastian Bach's Partita in D minor for solo violin (BWV 1004), performed by ${artist.fullName}, collated with ${count}+ other performers.`,
                image: `https://ciaccona.cthiebaud.com/screenshots/${key}.jpg`,
            });

            console.log('pushed', key)
            setTimeout(() => {
                var blob = new Blob([results], { type: "text/plain;charset=utf-8" });
                saveAs(blob, `_${key}.html`);
                console.log('saved', key)
            }, 300 * i++)

            // throw BreakException;
        })
    </script>
</head>

</html>